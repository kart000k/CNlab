import java.io.BufferedInputStream;import java.io.File;import java.io.FileInputStream;import java.io.OutputStream;import java.net.InetAddress;import java.net.ServerSocket;import java.net.Socketpublic class FileServer{public static void main(String[] args) throws Exception{//Initialize SocketsServerSocketssock = new ServerSocket(5000); Socketsocket = ssock.accept();//The InetAddress specificationInetAddress IA = InetAddress.getByName("localhost");//Specify the fileFile file = new File("e:\\Bookmarks.html");FileInputStreamfis = new FileInputStream(file);BufferedInputStream bis = new BufferedInputStream(fis);OutputStreamos = socket.getOutputStream(); //ReadFile Contents into contents arraybyte[] contents;long fileLength = file.length();
long current = 0;long start = System.nanoTime();while(current!=fileLength){int size = 10000;if(fileLength - current >= size)current += size;else{size = (int)(fileLength - current);current = fileLength;}contents = new byte[size];bis.read(contents, 0, size);os.write(contents);System.out.print("Sending file ... "+(current*100)/fileLength+"% complete!");}os.flush();//File transfer done. Close the socket connection!socket.close();ssock.close();System.out.println("File sent succesfully!");} }File Client:import java.io.BufferedOutputStream;import java.io.FileOutputStream;import java.io.InputStream;import java.net.InetAddress;import java.net.Socket;public class FileClient {public static void main(String[] args) throws Exception{//Initialize socketSocket socket = new Socket(InetAddress.getByName("localhost"), 5000); byte[]contents = new byte[10000];//Initialize the FileOutputStream to the output file's full path. FileOutputStreamfos = newFileOutputStream("e:\\Bookmarks1.html");BufferedOutputStreambos = new BufferedOutputStream(fos);InputStream is = socket.getInputStream();//No of bytes read in one read() callint bytesRead = 0;while((bytesRead=is.read(contents))!=-1)bos.write(contents, 0, bytesRead);.bos.flush();socket.close();System.out.println("File saved successfully!");}}
